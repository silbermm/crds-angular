<header ng-if="!app.state.current.data.hidemenu">
    <div class="overlay-container"></div>
    <!-- Brand Bar -->
    <ng-include src="'templates/brand-bar.html'"></ng-include>


    <div id="menu">
        <div class="container">
            <div class="row">
                <!-- TODO refactor this out into it's own directive, that uses the login and registration directives. The new directive should take an argument that is the internal directive (login and/or registration)* -->
                <div class="col-xs-12 menu__container hidden-print">
                    <div class="navbar-header">
                        <div ng-class="{show: menu.isMobileShowing}">
                            <button type="button" class="nav__side--toggle navbar-left hidden-md hidden-lg hidden-xl" ng-click="app.openAside('left', true)">
                                <span class="sr-only">Toggle navigation</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
                        </div>
                        <a class="navbar-brand logo" href="/"><img data-src="//crossroads-media.imgix.net/images/logo.svg" alt="crossroads">
                        </a>
                        <ul class="navbar--login list-unstyled">
                            <span id="current-user" class="hidden-xs" ng-if="$root.username != undefined" ng-cloak> {{$root.username}} </span>
                            <li class="hidden-xs ng-cloak" ng-show="$root.username != undefined" ng-cloak>
                                <a href="#/home" ng-click="logout()" class="ng-cloak">Sign Out</a>
                            </li>
                            <li class="hidden-xs" data-toggle="dropdown" ng-show="$root.username == undefined">
                                <button class="btn btn-primary" id="form-toggle" ng-click="toggleDesktopLogin(); passwordPrefix='login-dropdown'">
                                    <span>Login</span>
                                </button>
                            </li>

                            <li>
                                <ul class="navbar--login__dropdown list-unstyled col-md-3 soft-top soft-sides" role="menu" aria-labelledby="dropdownMenu1" ng-class="{toggleOpen: loginShow}">
                                    <li role="presentation">
                                        <div class="navbar--register__container">
                                            <div class="dd_menu">

                                                <login-form></login-form>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                        <ul class="navbar--login list-unstyled">
                            <li class="hidden-xs" data-toggle="dropdown" ng-show="$root.username == undefined">
                                <button class="btn btn-primary" id="form-toggle" ng-click="toggleDesktopRegister(); passwordPrefix='registration'">
                                    <span>Register</span>
                                </button>
                            </li>

                            <li>
                                <ul class="navbar--login__dropdown list-unstyled col-md-3 soft-top soft-sides" role="menu" aria-labelledby="dropdownMenu2" ng-class="{toggleOpen: registerShow}">
                                    <li role="presentation">
                                        <div class="navbar--register__container">
                                            <div class="dd_menu">
                                                <register-form></register-form>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <ng-include src="'templates/nav.html'"> </ng-include>
                </div>
            </div>
        </div>
    </div>
</header>
